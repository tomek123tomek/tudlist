<!DOCTYPE html>

<html lang="en">
	<head>
		<title>hi</title>
		<link rel="stylesheet" href='basic.css'>
		<!--
			<link rel="stylesheet" href='bootstrap.min.css'>
			<script src='x.js'></script>
		-->
	</head>

<body>

	<div id="tudlist">
		<div>Dudu List</div>
		<input type="text" id="input1">
		<span onclick="add()">Add</span>
	</div>

	<div id="taskContainer"></div>


</body>

<script>

	function getRndInteger(min, max) {
	  	return Math.floor(Math.random() * (max - min)) + min;
	}


	var addedCount = 3;

	var tasks = [
		{ 'name': 'bieganko', 'done': false },
		{ 'name': 'posprzatac kuwetke', 'done': false },
	]


	for(let i=0; i < tasks.length; i++) {
		addNewTask(tasks[i]);
	}


	function toggleHiddens(i) {
		document.getElementsByClassName("name" + i)[0].classList.toggle("hidden");
		document.getElementsByClassName("delBtn" + i)[0].classList.toggle("hidden");
		document.getElementsByClassName("editBtn" + i)[0].classList.toggle("hidden");
		document.getElementsByClassName("madedBtn" + i)[0].classList.toggle("hidden");
		document.getElementsByClassName("okBtn" + i)[0].classList.toggle("showed");
	}


	function addNewTask(task) {

		var inputValue;

		if(task) {
			inputValue = task['name'];
		} else {
			inputValue = document.getElementById("input1").value;

			if (inputValue === '') {
				alert("Nothing?!");
				return;
			}

			document.getElementById("input1").value = "";
		}


		var divek = document.createElement("div");
			divek.className = "item"

		document.getElementById("taskContainer").appendChild(divek);


		var span0 = document.createElement("span");
		var txt0 = document.createTextNode(inputValue);
		span0.setAttribute("class", "name name" + addedCount);
		span0.appendChild(txt0);
		divek.appendChild(span0);


		var span = document.createElement("span");
		var txt1 = document.createTextNode("DELETE");
		span.className = "delBtn delBtn" + addedCount;
		span.appendChild(txt1);
		span.onclick = function() {
			var div = this.parentElement;
			var par = div.parentElement;
			par.removeChild(div);
		}

		divek.appendChild(span);


		var span21 = document.createElement("input");
		span21.setAttribute("type", "text");
		span21.setAttribute("id", "edittext" + addedCount);
		span21.className = "edittext";


		divek.appendChild(span21);


		var span2 = document.createElement("span");
		var txt2 = document.createTextNode("MADED");
		span2.className = "madedBtn madedBtn" + addedCount;
		span2.appendChild(txt2);
		span2.onclick = function() {
			this.parentElement.classList.toggle('maded');
		}

		divek.appendChild(span2);

		var span3 = document.createElement("span");
		var txt3 = document.createTextNode("EDIT");
		span3.setAttribute("id", "editBtn" + addedCount);
		span3.className = "editBtn editBtn" + addedCount;
		span3.appendChild(txt3);
		span3.onclick = function() {
			let index = this.id.substr(7);

			let d1 = document.getElementById("edittext" + index);
			d1.classList.toggle("showed");
			d1.value = document.getElementsByClassName("name" + index)[0].innerHTML;

			toggleHiddens(index);
		}

		divek.appendChild(span3);


		var ok = document.createElement("span");
		var txt4 = document.createTextNode("OK");
		ok.setAttribute("id", "okBtn" + addedCount);
		ok.classList = "okBtn okBtn" + addedCount;
		ok.onclick = function() {
			let x = this.id.substr(5);

			let d1 = document.getElementById("edittext" + x);
			d1.classList.toggle("showed");
			document.getElementsByClassName("name" + x)[0].innerHTML = d1.value;

			toggleHiddens(x);
		}
		ok.appendChild(txt4);

		divek.appendChild(ok);



		addedCount++;

	}

</script>


</html>
